<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Galerie — SB MOUV’</title>
  <meta name="description" content="Galerie photos et vidéos des galas et projets SB MOUV’." />
  <link rel="stylesheet" href="assets/css/styles.css" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3CradialGradient id='g'%3E%3Cstop offset='0' stop-color='%23FFB36B'/%3E%3Cstop offset='0.55' stop-color='%23FF2D95'/%3E%3Cstop offset='1' stop-color='%238A2BE2'/%3E%3C/radialGradient%3E%3Ccircle cx='50' cy='50' r='50' fill='url(%23g)'/%3E%3C/svg%3E">
</head>
<body>

  <!-- top-bar identique -->
  <header class="nav">
    <div class="nav__inner container">
      <a class="nav__brand" href="index.html#accueil" aria-label="Retour accueil">
        <img src="assets/img/logo.png" class="nav__logo" alt="SB MOUV' logo">
        <span class="nav__name">SB MOUV'</span>
      </a>
      <button class="nav__toggle" aria-expanded="false" aria-controls="menu">Menu</button>
      <nav id="menu" class="menu">
        <a href="index.html#ateliers">Ateliers</a>
        <a href="index.html#histoire">Notre histoire</a>
        <a href="index.html#media">Souvenirs</a>
        <a href="index.html#contact" class="btn btn--sm">Contact</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="section">
      <div class="container">
        <header class="section__head">
          <h2>Galerie</h2>
          <p class="muted">Toutes nos photos et vidéos.</p>
        </header>

        <!-- FILTRES simples (optionnels) -->
        <!-- <div class="muted small" style="margin-bottom:14px">Filtres : Tous · Photos · Vidéos</div> -->

        <!-- GRILLE -->
        <div class="gallery-grid">
          <!-- Photos (thumbnails 16:9, clic = lightbox) -->
          <a href="assets/img/gala1.jpg" class="g-item photo" data-type="img">
            <img src="assets/img/gala1.jpg" alt="Gala 1">
          </a>
          <a href="assets/img/gala2.jpg" class="g-item photo" data-type="img">
            <img src="assets/img/gala2.jpg" alt="Gala 2">
          </a>
          <a href="assets/img/gala3.jpg" class="g-item photo" data-type="img">
            <img src="assets/img/gala3.jpg" alt="Gala 3">
          </a>
          <a href="assets/img/gala4.jpg" class="g-item photo" data-type="img">
            <img src="assets/img/gala4.jpg" alt="Gala 4">
          </a>
          <a href="assets/img/gala5.jpg" class="g-item photo" data-type="img">
            <img src="assets/img/gala5.jpg" alt="Gala 5">
          </a>

          <!-- Vidéo YouTube -->
          <a href="https://www.youtube-nocookie.com/embed/aqz-KE-bpKQ" class="g-item video" data-type="yt" aria-label="Voir la vidéo">
            <div class="video-thumb">
              <iframe src="https://www.youtube-nocookie.com/embed/aqz-KE-bpKQ"
                      title="Vidéo"
                      loading="lazy"
                      tabindex="-1"
                      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                      allowfullscreen></iframe>
            </div>
          </a>

          <!-- Vidéo locale (si tu en as une) -->
          <!--
          <a href="assets/video/gala.mp4" class="g-item video" data-type="mp4" aria-label="Voir la vidéo locale">
            <div class="video-thumb">
              <video muted playsinline>
                <source src="assets/video/gala.mp4" type="video/mp4">
              </video>
            </div>
          </a>
          -->
        </div>

        <div style="margin-top:18px">
          <a class="btn btn--ghost" href="index.html#media">← Retour</a>
        </div>
      </div>
    </section>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <button class="lb-close" aria-label="Fermer">×</button>
    <div class="lb-inner" id="lbInner"></div>
    <button class="lb-prev" aria-label="Précédent">‹</button>
    <button class="lb-next" aria-label="Suivant">›</button>
  </div>

  <script src="assets/js/main.js" defer></script>
  <script>
    // ==== Lightbox minimal (images + YouTube + mp4) ====
    (function(){
      const grid = document.querySelector('.gallery-grid');
      const lb   = document.getElementById('lightbox');
      const box  = document.getElementById('lbInner');
      const prev = document.querySelector('.lb-prev');
      const next = document.querySelector('.lb-next');
      const close= document.querySelector('.lb-close');
      if(!grid || !lb) return;

      const items = Array.from(grid.querySelectorAll('.g-item'));
      let index = 0;

      function open(i){
        index = i;
        const a = items[index];
        const type = a.dataset.type;
        const href = a.getAttribute('href');

        // contenu
        box.innerHTML = '';
        if(type === 'img'){
          const img = document.createElement('img');
          img.src = href;
          img.alt = a.querySelector('img')?.alt || '';
          box.appendChild(img);
        } else if (type === 'yt'){
          const ifr = document.createElement('iframe');
          ifr.src = href + (href.includes('?') ? '&' : '?') + 'autoplay=1&rel=0&modestbranding=1';
          ifr.allow = 'autoplay; encrypted-media; picture-in-picture';
          ifr.allowFullscreen = true;
          box.appendChild(ifr);
        } else if (type === 'mp4'){
          const vid = document.createElement('video');
          vid.controls = true; vid.autoplay = true;
          vid.innerHTML = '<source src="'+href+'" type="video/mp4">';
          box.appendChild(vid);
        }

        lb.setAttribute('aria-hidden','false');
        document.body.style.overflow='hidden';
      }
      function closeLB(){
        lb.setAttribute('aria-hidden','true');
        box.innerHTML='';
        document.body.style.overflow='';
      }
      function nav(dir){
        index = (index + dir + items.length) % items.length;
        open(index);
      }

      grid.addEventListener('click', (e)=>{
        const a = e.target.closest('.g-item');
        if(!a) return;
        e.preventDefault();
        open(items.indexOf(a));
      });
      close.addEventListener('click', closeLB);
      lb.addEventListener('click', (e)=>{ if(e.target===lb) closeLB(); });
      prev.addEventListener('click', ()=>nav(-1));
      next.addEventListener('click', ()=>nav(1));
      document.addEventListener('keydown',(e)=>{
        if(lb.getAttribute('aria-hidden')==='true') return;
        if(e.key==='Escape') closeLB();
        if(e.key==='ArrowLeft') nav(-1);
        if(e.key==='ArrowRight') nav(1);
      });
    })();
  </script>
</body>
</html>
